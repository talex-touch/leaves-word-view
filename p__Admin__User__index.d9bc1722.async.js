"use strict";(self.webpackChunkyupi_antd_frontend_init=self.webpackChunkyupi_antd_frontend_init||[]).push([[7971],{36748:function(te,D,r){r.r(D),r.d(D,{default:function(){return ne}});var G=r(26068),I=r.n(G),L=r(90228),s=r.n(L),N=r(87999),j=r.n(N),k=r(48305),U=r.n(k),R=r(21047),A=r(56435),ue=r(7039),v=r(80438),V=r(1573),$=r(75271),t=r(52676),H=function(){var T=j()(s()().mark(function n(l){var i;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,(0,R.T4)(l);case 4:return i(),v.ZP.success("\u521B\u5EFA\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),i(),v.ZP.error("\u521B\u5EFA\u5931\u8D25\uFF0C"+e.t0.message),e.abrupt("return",!1);case 14:case"end":return e.stop()}},n,null,[[1,9]])}));return function(l){return T.apply(this,arguments)}}(),K=function(n){var l=n.visible,i=n.columns,o=n.onSubmit,e=n.onCancel;return(0,t.jsx)(V.Z,{destroyOnClose:!0,title:"\u521B\u5EFA",open:l,footer:null,onCancel:function(){e==null||e()},children:(0,t.jsx)(A.Z,{type:"form",columns:i,onSubmit:function(){var f=j()(s()().mark(function C(m){var d;return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,H(m);case 2:d=h.sent,d&&(o==null||o(m));case 4:case"end":return h.stop()}},C)}));return function(C){return f.apply(this,arguments)}}()})})},W=K,J=function(){var T=j()(s()().mark(function n(l){var i;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.ZP.loading("\u6B63\u5728\u66F4\u65B0"),e.prev=1,e.next=4,(0,R.dj)(l);case 4:return i(),v.ZP.success("\u66F4\u65B0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),i(),v.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C"+e.t0.message),e.abrupt("return",!1);case 14:case"end":return e.stop()}},n,null,[[1,9]])}));return function(l){return T.apply(this,arguments)}}(),Q=function(n){var l=n.oldData,i=n.visible,o=n.columns,e=n.onSubmit,f=n.onCancel;return l?(0,t.jsx)(V.Z,{destroyOnClose:!0,title:"\u66F4\u65B0",open:i,footer:null,onCancel:function(){f==null||f()},children:(0,t.jsx)(A.Z,{type:"form",columns:o,form:{initialValues:l},onSubmit:function(){var C=j()(s()().mark(function m(d){var b;return s()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,J(I()(I()({},d),{},{id:l.id}));case 2:b=S.sent,b&&(e==null||e(d));case 4:case"end":return S.stop()}},m)}));return function(m){return C.apply(this,arguments)}}()})}):(0,t.jsx)(t.Fragment,{})},X=Q,Y=r(65496),q=r(97128),_=r(69116),B=r(97369),ee=r(49204),re=function(){var n=(0,$.useState)(!1),l=U()(n,2),i=l[0],o=l[1],e=(0,$.useState)(!1),f=U()(e,2),C=f[0],m=f[1],d=(0,$.useRef)(),b=(0,$.useState)(),h=U()(b,2),S=h[0],E=h[1],ae=function(){var p=j()(s()().mark(function u(y){var c,P;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=v.ZP.loading("\u6B63\u5728\u5220\u9664"),y){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,R.Hh)({id:y.id});case 6:return c(),v.ZP.success("\u5220\u9664\u6210\u529F"),d==null||(P=d.current)===null||P===void 0||P.reload(),a.abrupt("return",!0);case 12:return a.prev=12,a.t0=a.catch(3),c(),v.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C"+a.t0.message),a.abrupt("return",!1);case 17:case"end":return a.stop()}},u,null,[[3,12]])}));return function(y){return p.apply(this,arguments)}}(),F=[{title:"id",dataIndex:"id",valueType:"text",hideInForm:!0},{title:"\u8D26\u53F7",dataIndex:"userAccount",valueType:"text"},{title:"\u7528\u6237\u540D",dataIndex:"userName",valueType:"text"},{title:"\u5934\u50CF",dataIndex:"userAvatar",valueType:"image",fieldProps:{width:64},hideInSearch:!0},{title:"\u7B80\u4ECB",dataIndex:"userProfile",valueType:"textarea"},{title:"\u6743\u9650",dataIndex:"userRole",valueEnum:{user:{text:"\u7528\u6237"},admin:{text:"\u7BA1\u7406\u5458"}}},{title:"\u521B\u5EFA\u65F6\u95F4",sorter:!0,dataIndex:"createTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u66F4\u65B0\u65F6\u95F4",sorter:!0,dataIndex:"updateTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(u,y){return(0,t.jsxs)(_.Z,{size:"middle",children:[(0,t.jsx)(B.Z.Link,{onClick:function(){E(y),m(!0)},children:"\u4FEE\u6539"}),(0,t.jsx)(B.Z.Link,{type:"danger",onClick:function(){return ae(y)},children:"\u5220\u9664"})]})}}];return(0,t.jsxs)(q._z,{children:[(0,t.jsx)(A.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:d,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,t.jsxs)(ee.ZP,{type:"primary",onClick:function(){o(!0)},children:[(0,t.jsx)(Y.Z,{})," \u65B0\u5EFA"]},"primary")]},request:function(){var p=j()(s()().mark(function u(y,c,P){var M,a,O,w,x,g,z;return s()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return O=(M=Object.keys(c))===null||M===void 0?void 0:M[0],w=(a=c==null?void 0:c[O])!==null&&a!==void 0?a:void 0,Z.next=4,(0,R.D1)(I()(I()({},y),{},{sortField:O,sortOrder:w},P));case 4:return x=Z.sent,g=x.data,z=x.code,Z.abrupt("return",{success:z===0,data:(g==null?void 0:g.records)||[],total:Number(g==null?void 0:g.total)||0});case 8:case"end":return Z.stop()}},u)}));return function(u,y,c){return p.apply(this,arguments)}}(),columns:F}),(0,t.jsx)(W,{visible:i,columns:F,onSubmit:function(){var u;o(!1),(u=d.current)===null||u===void 0||u.reload()},onCancel:function(){o(!1)}}),(0,t.jsx)(X,{visible:C,columns:F,oldData:S,onSubmit:function(){var u;m(!1),E(void 0),(u=d.current)===null||u===void 0||u.reload()},onCancel:function(){m(!1)}})]})},ne=re}}]);
